<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Downloads and Parses World Prison Brief Data • prisonbrief</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">prisonbrief</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="/index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<p><a href="https://zenodo.org/badge/latestdoi/97652568"><img src="https://zenodo.org/badge/97652568.svg" alt="DOI"></a> <a href="https://cran.r-project.org/package=prisonbrief"><img src="http://www.r-pkg.org/badges/version/prisonbrief" alt="CRAN_Status_Badge"></a> <img src="https://ci.appveyor.com/api/projects/status/github/danilofreire/prisonbrief?branch=master&amp;svg=true" alt="AppVeyor Build Status"><a href="https://CRAN.R-project.org/package=prisonbrief"><img src="http://cranlogs.r-pkg.org/badges/grand-total/prisonbrief" alt="CRAN_Download_Badge"></a></p>
<div id="prisonbrief-an-r-package-that-returns-tidy-data-from-the-world-prison-brief-website" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#prisonbrief-an-r-package-that-returns-tidy-data-from-the-world-prison-brief-website" class="anchor"></a>prisonbrief: An R package that returns tidy data from the World Prison Brief website</h1></div>
<p>The goal of <code>prisonbrief</code> is to download, clean and return data from the <a href="http://www.prisonstudies.org/">World Prison Brief website</a>. The World Prison Brief is an online database compiled by the <a href="http://www.icpr.org.uk/">Institute for Criminal Policy Research</a> with information on prison systems around the world. Data currently cover 223 jurisdictions and have been collected from public sources. The <code>prisonbrief</code> package provides easy-to-use functions to convert WPB data into a format convenient for statistical analysis.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The stable version of <code>prisonbrief</code> is available on <a href="https://cran.r-project.org/package=prisonbrief">CRAN</a>. To install it, just type:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"prisonbrief"</span>)</code></pre></div>
<p>You can install the most recent development version of <code>prisonbrief</code> using the <code>devtools</code> package. First, you need to install the <code>devtools</code> package with the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(devtools)) <span class="kw">install.packages</span>(<span class="st">"devtools"</span>)</code></pre></div>
<p>Then you need to load <code>devtools</code> and install <code>prisonbrief</code> from <a href="https://github.com/danilofreire/prisonbrief">its GitHub repository</a>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"danilofreire/prisonbrief"</span>)</code></pre></div>
<p>If you are using Linux, you may need to type the following command before installing <code>prisonbrief</code>:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">sudo</span> apt-get install libudunits2-dev</code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p><code>prisonbrief</code> is quite simple to use. The package contains only three functions, all of them starting with <code>wpb</code>, a mnemonic for World Prison Brief.</p>
<p>The first is a convenience function named <code><a href="reference/wpb_list.html">wpb_list()</a></code>. It prints a list of available countries to the console.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(prisonbrief)

<span class="kw"><a href="reference/wpb_list.html">wpb_list</a></span>()
<span class="co">#&gt; # A tibble: 226 x 2</span>
<span class="co">#&gt;                 country_name             country_url</span>
<span class="co">#&gt;                        &lt;chr&gt;                   &lt;chr&gt;</span>
<span class="co">#&gt;  1               Afghanistan             afghanistan</span>
<span class="co">#&gt;  2                   Albania                 albania</span>
<span class="co">#&gt;  3                   Algeria                 algeria</span>
<span class="co">#&gt;  4     American Samoa  (USA)      american-samoa-usa</span>
<span class="co">#&gt;  5                   Andorra                 andorra</span>
<span class="co">#&gt;  6                    Angola                  angola</span>
<span class="co">#&gt;  7 Anguilla (United Kingdom) anguilla-united-kingdom</span>
<span class="co">#&gt;  8       Antigua and Barbuda     antigua-and-barbuda</span>
<span class="co">#&gt;  9                 Argentina               argentina</span>
<span class="co">#&gt; 10                   Armenia                 armenia</span>
<span class="co">#&gt; # ... with 216 more rows</span></code></pre></div>
<p>The second function is <code><a href="reference/wpb_table.html">wpb_table()</a></code>. This function returns a series of variables about the prison systems of the world, of a particular region, or of a specific country. For instance, the code below downloads prison data for Africa:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">africa &lt;-<span class="st"> </span><span class="kw"><a href="reference/wpb_table.html">wpb_table</a></span>(<span class="dt">region =</span> <span class="st">"Africa"</span>)
<span class="kw">names</span>(africa)
<span class="co">#&gt;  [1] "country"                 "prison_population_rate" </span>
<span class="co">#&gt;  [3] "prison-population-total" "female-prisoners"       </span>
<span class="co">#&gt;  [5] "pre-trial-detainees"     "foreign-prisoners"      </span>
<span class="co">#&gt;  [7] "occupancy-level"         "iso_a2"                 </span>
<span class="co">#&gt;  [9] "name"                    "geometry"</span></code></pre></div>
<p>The region choices are “Africa”, “Asia”, “Caribbean”, “Central America”, “Europe”, “Middle East”, “North America”, “Oceania”, “South America” and “All”.</p>
<p><code><a href="reference/wpb_table.html">wpb_table()</a></code> also provides geometric shapes for maps. For instance, you can download and plot the prison population rate in South America with only a few lines of code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">south_america &lt;-<span class="st"> </span><span class="kw"><a href="reference/wpb_table.html">wpb_table</a></span>(<span class="dt">region =</span> <span class="st">"South America"</span>)

<span class="kw">library</span>(ggplot2)
<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(south_america, <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">fill =</span> prison_population_rate)) <span class="op">+</span>
<span class="st">        </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggsf">geom_sf</a></span>() <span class="op">+</span>
<span class="st">        </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/scale_brewer">scale_fill_distiller</a></span>(<span class="dt">palette =</span> <span class="st">"YlOrRd"</span>, <span class="dt">trans =</span> <span class="st">"reverse"</span>) <span class="op">+</span>
<span class="st">        </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggtheme">theme_minimal</a></span>()</code></pre></div>
<div class="figure">
<img src="http://i.imgur.com/JxO0wCr.png">
</div>
<p>The function can also be used to retrieve data for a single country. The data returned are parsed from the single country tables, however, and are not ready for quantitative analysis without further cleaning (removing parentheses etc.). Since some of this information may be relevant, we have chosen to leave it in. Data from regions instead of a single country are fully prepared for automated analysis.</p>
<p>Finally, we have added the <code><a href="reference/wpb_series.html">wpb_series()</a></code> function to the package. The function downloads and tidies the tables describing the trends in the prison population total and the prison population rate for every jurisdiction included in the project. Below is an example taken from <a href="http://www.prisonstudies.org/country/germany">Germany’s country profile</a>:</p>
<div class="figure">
<img src="http://i.imgur.com/vtbrtg1.png">
</div>
<p>You can retrieve the same information with the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">germany &lt;-<span class="st"> </span><span class="kw"><a href="reference/wpb_series.html">wpb_series</a></span>(<span class="dt">country =</span> <span class="st">"Germany"</span>)
germany
<span class="co">#&gt; # A tibble: 8 x 4</span>
<span class="co">#&gt;   Country  Year `Prison population total` `Prison population rate`</span>
<span class="co">#&gt;     &lt;chr&gt; &lt;dbl&gt;                     &lt;dbl&gt;                    &lt;dbl&gt;</span>
<span class="co">#&gt; 1 germany  2000                     70252                       85</span>
<span class="co">#&gt; 2 germany  2002                     70977                       86</span>
<span class="co">#&gt; 3 germany  2004                     79452                       96</span>
<span class="co">#&gt; 4 germany  2006                     76629                       93</span>
<span class="co">#&gt; 5 germany  2008                     72259                       88</span>
<span class="co">#&gt; 6 germany  2010                     69385                       85</span>
<span class="co">#&gt; 7 germany  2012                     65889                       82</span>
<span class="co">#&gt; 8 germany  2014                     61872                       76</span></code></pre></div>
<p><code><a href="reference/wpb_series.html">wpb_series()</a></code> can also be combined with <code><a href="reference/wpb_list.html">wpb_list()</a></code> to make interesting time series graphs. The code below downloads data for all countries then plots the prison population rate for Brazil, Germany, Russia and the United States:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)

x &lt;-<span class="st"> </span><span class="kw">list</span>()
countries &lt;-<span class="st"> </span><span class="kw"><a href="reference/wpb_list.html">wpb_list</a></span>()
<span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(countries)){
  y &lt;-<span class="st"> </span><span class="kw">try</span>(<span class="kw"><a href="reference/wpb_series.html">wpb_series</a></span>(<span class="dt">country =</span> countries<span class="op">$</span>country_url[i]), <span class="dt">silent =</span> <span class="ot">FALSE</span>)
  <span class="cf">if</span>(<span class="kw">class</span>(y) <span class="op">!=</span><span class="st"> 'try-error'</span>){
    x[[i]] &lt;-<span class="st"> </span>y
  } <span class="cf">else</span>{
    <span class="cf">next</span>
  }
}
X &lt;-<span class="st"> </span>data.table<span class="op">::</span><span class="kw">rbindlist</span>(x, <span class="dt">fill =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/join.html">full_join</a></span>(countries, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">"Country"</span> =<span class="st"> "country_url"</span>))

X <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(country_name <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">"Brazil"</span>,
                                        <span class="st">"Germany"</span>,
                                        <span class="st">"Russian Federation"</span>,
                                        <span class="st">"United States of America"</span>)) <span class="op">%&gt;%</span>
<span class="st">        </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> Year, <span class="dt">y =</span> <span class="st">`</span><span class="dt">Prison population rate</span><span class="st">`</span>,
                   <span class="dt">group =</span> country_name, <span class="dt">colour =</span> country_name)) <span class="op">+</span>
<span class="st">        </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_path">geom_line</a></span>() <span class="op">+</span>
<span class="st">        </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggtheme">theme_minimal</a></span>()</code></pre></div>
<div class="figure">
<img src="http://i.imgur.com/lIUhO5E.png">
</div>
</div>
<div id="contributions" class="section level2">
<h2 class="hasAnchor">
<a href="#contributions" class="anchor"></a>Contributions</h2>
<p><code>prisonbrief</code> was written by <a href="http://danilofreire.com/">Danilo Freire</a> and <a href="https://robertmyles.github.io/">Robert Myles McDonnell</a>. Feedback and comments are most welcome. If you have any suggestions on how to improve this package feel free to <a href="https://github.com/danilofreire/prisonbrief/issues">open an issue on GitHub</a>.</p>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>You can cite the <code>prisonbrief</code> package with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">citation</span>(<span class="st">"prisonbrief"</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; To cite 'prisonbrief' in publications, please use:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Danilo Freire and Robert Myles McDonnell (2017). prisonbrief:</span>
<span class="co">#&gt;   Downloads and Parses World Prison Brief Data. R package version</span>
<span class="co">#&gt;   0.1.0. URL: https://CRAN.R-project.org/package=prisonbrief</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; A BibTeX entry for LaTeX users is</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   @Manual{,</span>
<span class="co">#&gt;     title = {{prisonbrief}: Downloads and Parses World Prison Brief Data},</span>
<span class="co">#&gt;     author = {Danilo Freire and Robert Myles McDonnell},</span>
<span class="co">#&gt;     note = {R package version 0.1.0},</span>
<span class="co">#&gt;     year = {2017},</span>
<span class="co">#&gt;     url = {https://CRAN.R-project.org/package=prisonbrief},</span>
<span class="co">#&gt;   }</span></code></pre></div>
<p>Please also cite the source as <a href="http://www.prisonstudies.org/about-us">World Prison Brief, Institute for Criminal Policy Research</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2 class="hasAnchor">
<a href="#sidebar" class="anchor"></a>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cran.r-project.org/package=prisonbrief">https://​cran.r-project.org/​package=prisonbrief</a>
</li>
</ul>
<h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE.html">LICENSE</a></p>
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing prisonbrief</a></li>
</ul>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Danilo Freire <br><small class="roles"> Author, maintainer </small> </li>
<li>Robert McDonnell <br><small class="roles"> Author </small> </li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Danilo Freire, Robert McDonnell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
